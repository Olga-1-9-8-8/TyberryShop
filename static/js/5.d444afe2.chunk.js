(this["webpackJsonpshop-main-project"]=this["webpackJsonpshop-main-project"]||[]).push([[5],{91:function(e,a,t){e.exports={personalProfile:"PersonalProfile_personalProfile__3yvk2",personalProfileData:"PersonalProfile_personalProfileData__hAi63",personalProfileFormTitle:"PersonalProfile_personalProfileFormTitle__2Wq0w",personalEmail:"PersonalProfile_personalEmail__2P8_W",personalEmailData:"PersonalProfile_personalEmailData__2v3j3",personalEmailDataTitle:"PersonalProfile_personalEmailDataTitle__1IaBR",personalEmailDataMail:"PersonalProfile_personalEmailDataMail__5aCI0",personalEmailIcon:"PersonalProfile_personalEmailIcon__1LcVT",personalSale:"PersonalProfile_personalSale__BKQLL",personalSaleTitle:"PersonalProfile_personalSaleTitle__1OvB_",personalSaleResult:"PersonalProfile_personalSaleResult__1aOd0",accountButton:"PersonalProfile_accountButton__U-0UW",orderWrapper:"PersonalProfile_orderWrapper__3bVhh",order:"PersonalProfile_order__2qAZJ",orderTitle:"PersonalProfile_orderTitle__3ygtC",orderText:"PersonalProfile_orderText__WwQzJ"}},92:function(e,a,t){e.exports={button:"Button_button__sLNpF"}},93:function(e,a,t){e.exports={profile:"Profile_profile__3G0zv",profileWrapper:"Profile_profileWrapper__1P8zD",profileTitle:"Profile_profileTitle__qULdk",errorMessage:"Profile_errorMessage__3Ghvy",accountMessage:"Profile_accountMessage__dqrSj",accountMessageTitle:"Profile_accountMessageTitle__19jk2"}},94:function(e,a,t){e.exports={input:"ProfileInput_input__1aSko"}},99:function(e,a,t){"use strict";t.r(a);var r=t(72),s=t.n(r),n=t(96),l=t(73),c=t(7),o=t(2),i=t(86),u=(t(88),t(97),i.a.initializeApp({apiKey:"AIzaSyDUQdnpo19mjVGPsI2xUTWPi6sS9wn982U",authDomain:"tyberryshopauth.firebaseapp.com",projectId:"tyberryshopauth",storageBucket:"tyberryshopauth.appspot.com",messagingSenderId:"427620586327",appId:"1:427620586327:web:3521aa4945ef1418f1e412"})),p=(u.auth(),u.firestore()),d=function(){var e=Object(l.a)(s.a.mark((function e(a,t){var r,n,l,c,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.reduce((function(e,a){return e+a.totalPriseOrder}),0),n=t.reduce((function(e,a){return e+a.totalCountOrder}),0),a){e.next=4;break}return e.abrupt("return");case 4:return l=a.uid,c=p.doc("users/".concat(l)),e.next=8,c.get();case 8:if(e.sent.exists){e.next=15;break}return o=a.email,i=new Date,u={day:i.getDate(),month:i.getMonth()+1,year:i.getFullYear(),minute:i.getMinutes(),hours:i.getHours()},e.next=15,c.set({email:o,date:u,totalOrderGoodsCount:n,totalOrderGoodsPrice:r});case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),j=u,h=t(13),f=t(46),b=t(44),m=t(91),O=t.n(m),_=t(43),x=t(1),P=function(e){var a=e.logOut,t=e.email,r=Object(h.b)(_.c);return Object(x.jsxs)("section",{className:O.a.personalProfile,children:[Object(x.jsxs)("div",{className:O.a.personalProfileData,children:[Object(x.jsx)("h2",{className:O.a.personalProfileFormTitle,children:"\u0412\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435:"}),Object(x.jsxs)("div",{className:O.a.personalEmail,children:[Object(x.jsx)("div",{className:O.a.personalEmailIcon,children:Object(x.jsx)(b.c,{size:120})}),Object(x.jsxs)("div",{className:O.a.personalEmailData,children:[Object(x.jsx)("span",{className:O.a.personalEmailDataTitle,children:"\u0412\u0430\u0448 email"}),Object(x.jsx)("span",{className:O.a.personalEmailDataMail,children:t})]})]}),Object(x.jsxs)("div",{className:O.a.personalSale,children:[Object(x.jsx)("div",{className:O.a.personalSaleTitle,children:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u0432\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"}),Object(x.jsx)("div",{className:O.a.personalSaleResult,children:"10%"})]}),Object(x.jsx)("button",{type:"submit",className:O.a.accountButton,onClick:a,children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{className:O.a.personalProfileFormTitle,children:"\u0412\u0430\u0448 \u0417\u0430\u043a\u0430\u0437:"}),r.length?Object(x.jsx)("div",{className:O.a.orderWrapper,children:Object(x.jsxs)("div",{className:O.a.order,children:[Object(x.jsx)("div",{className:O.a.orderTitle,children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u041d\u0430\u0441!"}),Object(x.jsxs)("div",{className:O.a.orderText,children:["\u0412\u044b \u0437\u0430\u043a\u0430\u0437\u0430\u043b\u0438",Object(x.jsxs)("span",{children:[" ",r.reduce((function(e,a){return e+a.totalCountOrder}),0)," ","\u0448\u0442. \u0442\u043e\u0432\u0430\u0440\u043e\u0432"]})]}),Object(x.jsxs)("div",{className:O.a.orderText,children:["\u041d\u0430 \u043e\u0431\u0449\u0443\u044e \u0441\u0443\u043c\u043c\u0443",Object(x.jsxs)("span",{children:[" ",r.reduce((function(e,a){return e+a.totalPriseOrder}),0)," ","\u0440\u0443\u0431\u043b\u0435\u0439"]})]})]})}):Object(x.jsx)("div",{className:O.a.orderWrapper,children:Object(x.jsxs)("div",{className:O.a.order,children:[Object(x.jsx)("p",{className:O.a.orderTitle,children:"\u0423 \u0412\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(x.jsx)("p",{className:O.a.orderText,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0438 \u0437\u0430\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u0445 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u041a\u043e\u0440\u0437\u0438\u043d\u0430"})]})})]})]})},v=t(92),g=t.n(v),N=function(e){var a=e.text,t=e.handler;return Object(x.jsx)("button",{type:"submit",onClick:t,className:g.a.button,children:a})},T=t(93),y=t.n(T),w=t(94),S=t.n(w),k=function(e){var a=e.onChange,t=e.placeholder,r=e.type,s=e.value;return Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:r,placeholder:t,value:s,onChange:a,className:S.a.input,"min-length":"4","max-length":"30",required:!0})})};a.default=function(){var e=Object(h.a)(),a=Object(h.b)(_.c),t=Object(h.b)(f.b),r=Object(o.useState)(""),i=Object(c.a)(r,2),u=i[0],p=i[1],b=Object(o.useState)(""),m=Object(c.a)(b,2),O=m[0],v=m[1],g=Object(o.useState)(""),T=Object(c.a)(g,2),w=T[0],S=T[1],D=Object(o.useState)(!1),E=Object(c.a)(D,2),M=E[0],C=E[1],W=function(){S("")},I=Object(o.useCallback)((function(){j.auth().onAuthStateChanged(function(){var t=Object(l.a)(s.a.mark((function t(r){var l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,d(r,a);case 3:null===(l=t.sent)||void 0===l||l.onSnapshot((function(a){e(Object(f.c)(Object(n.a)({id:a.id},a.data())))})),p(""),v(""),t.next=9;break;case 8:e(Object(f.c)(r));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,a]);Object(o.useEffect)((function(){return I(),function(){I()}}),[I]);return Object(x.jsx)("section",{className:y.a.profile,children:t?Object(x.jsx)(P,{logOut:function(){j.auth().signOut()},email:t.email}):Object(x.jsxs)("div",{className:y.a.profileWrapper,children:[Object(x.jsx)("h2",{className:y.a.profileTitle,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(x.jsx)(k,{onChange:function(e){p(e.target.value)},value:u,type:"email",placeholder:"Email"}),Object(x.jsx)(k,{onChange:function(e){v(e.target.value)},value:O,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(x.jsx)("p",{className:y.a.errorMessage,children:w}),M?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{handler:function(e){e.preventDefault(),W(),j.auth().signInWithEmailAndPassword(u,O).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":case"auth/wrong-password":S(e.message)}}))},text:"\u0412\u043e\u0439\u0442\u0438"}),Object(x.jsxs)("p",{children:[Object(x.jsxs)("span",{className:y.a.accountMessage,children:[" ","\u0415\u0441\u043b\u0438 \u0443 \u0412\u0430\u0441 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"," "]}),Object(x.jsx)("span",{className:y.a.accountMessageTitle,onClick:function(){return C((function(e){return!e}))},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{handler:function(e){e.preventDefault(),W(),j.auth().createUserWithEmailAndPassword(u,O).then((function(e){var t=e.user;d(t,a)})).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":case"auth/weak-password":S(e.message)}}))},text:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(x.jsxs)("p",{children:[Object(x.jsxs)("span",{className:y.a.accountMessage,children:[" ","\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"," "]}),Object(x.jsx)("span",{className:y.a.accountMessageTitle,onClick:function(){return C((function(e){return!e}))},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})})}}}]);
//# sourceMappingURL=5.d444afe2.chunk.js.map