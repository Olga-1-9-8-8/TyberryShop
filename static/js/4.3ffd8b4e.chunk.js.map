{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","components/Basket/Basket.module.css","components/Basket/BasketItem/BasketItem.module.css","components/Basket/BasketItem/BasketItemCounter/BasketItemCounter.module.css","components/Basket/BasketItem/BasketItemCounter/BasketItemCounter.tsx","components/Basket/BasketItem/BasketItem.tsx","components/Basket/Basket.tsx"],"names":["module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","BasketItemCounter","product","dispatch","useDispatch","ref","useRef","useState","count","inputValue","setInputValue","decreaseHandler","e","a","preventDefault","current","updateCountInItem","id","increaseHandler","className","styles","basketItemCounter","type","basketItemButtonDisable","basketItemButton","onClick","min","onChange","target","basketItemInput","BasketItem","useAppDispatch","basketItem","basketItemPictureWrapper","basketItemPicture","src","img","alt","basketItemProductTitle","text","basketItemProductCounter","basketItemProductPriceWrapper","basketItemProductPriceNew","price","sale","basketItemProductPrice","basketItemProductDeleteWrapper","removeToCart","Basket","history","useHistory","cartProducts","useAppSelector","selectCartValue","totalCount","setTotalCount","totalPrice","setTotalPrice","totalPriceBeforeSale","setTotalPriceBeforeSale","totalSale","setTotalSale","useEffect","items","priceBeforeSale","forEach","item","length","basketNothing","basket","basketTitle","basketWrapper","map","basketResultWrapper","basketResultItem","basketResultButtonWrapper","push","order","totalPriseOrder","totalCountOrder","addToOrder","removeAllCarts","basketResultButton"],"mappings":"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","file":"static/js/4.3ffd8b4e.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basket\":\"Basket_basket__2crO0\",\"basketTitle\":\"Basket_basketTitle__bedu5\",\"basketWrapper\":\"Basket_basketWrapper__1j-Kz\",\"basketResultWrapper\":\"Basket_basketResultWrapper__3oCoD\",\"basketResultItem\":\"Basket_basketResultItem__bIhGU\",\"basketResultButtonWrapper\":\"Basket_basketResultButtonWrapper__24p6f\",\"basketResultButton\":\"Basket_basketResultButton__3Xmd2\",\"basketNothing\":\"Basket_basketNothing__24vZx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basketItem\":\"BasketItem_basketItem__3FH82\",\"basketItemPrise\":\"BasketItem_basketItemPrise__2YnCG\",\"basketItemPictureWrapper\":\"BasketItem_basketItemPictureWrapper__1IpdB\",\"basketItemPicture\":\"BasketItem_basketItemPicture__1eNWf\",\"basketItemProductTitle\":\"BasketItem_basketItemProductTitle__2Fqx6\",\"basketItemProductCounter\":\"BasketItem_basketItemProductCounter__2Z-Xh\",\"basketItemProductPriceWrapper\":\"BasketItem_basketItemProductPriceWrapper__1niSR\",\"basketItemProductPriceNew\":\"BasketItem_basketItemProductPriceNew__Q63Iv\",\"basketItemProductPrice\":\"BasketItem_basketItemProductPrice__1Eq6r\",\"basketItemProductDeleteWrapper\":\"BasketItem_basketItemProductDeleteWrapper__3AUyL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basketItemCounter\":\"BasketItemCounter_basketItemCounter__38uVr\",\"basketItemButton\":\"BasketItemCounter_basketItemButton__1Qgoy\",\"basketItemButtonDisable\":\"BasketItemCounter_basketItemButtonDisable__3kMHI\",\"basketItemInput\":\"BasketItemCounter_basketItemInput__387J7\"};","import React, { useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { IProductItem } from '../../../../interfaces';\nimport { updateCountInItem } from '../../../MainPageContent/Goods/Good/cartSlice';\nimport styles from './BasketItemCounter.module.css';\n\ninterface Props {\n  product: IProductItem;\n}\n\nexport const BasketItemCounter: React.FC<Props> = ({ product }) => {\n  const dispatch = useDispatch(); // get dispatch from store\n\n  //   let currentCountValue = React.createRef();\n\n  const ref = useRef<HTMLInputElement>(null);\n\n  const [inputValue, setInputValue] = useState(product.count); // здесь путаница строка vs число????\n\n  const onChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(+e.target.value);\n    dispatch(updateCountInItem({ id: product.id, count: +e.target.value }));\n  };\n  const decreaseHandler = async (e: React.PointerEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    setInputValue((inputValue) => inputValue - 1);\n    if (+ref.current!.value === 1) return;\n    dispatch(\n      updateCountInItem({ id: product.id, count: +ref.current!.value - 1 }),\n    );\n  };\n\n  const increaseHandler = async (e: React.PointerEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    setInputValue((inputValue) => inputValue + 1);\n    dispatch(\n      updateCountInItem({ id: product.id, count: +ref.current!.value + 1 }),\n    );\n  };\n\n  return (\n    <div className={styles.basketItemCounter}>\n      <button\n        type=\"submit\"\n        className={\n          product.count === 1\n            ? styles.basketItemButtonDisable\n            : styles.basketItemButton\n        }\n        onClick={decreaseHandler}\n      >\n        <span>-</span>\n      </button>\n\n      <input\n        type=\"number\"\n        min=\"1\"\n        value={inputValue}\n        onChange={onChangeHandler}\n        className={styles.basketItemInput}\n        // ref={currentCountValue}\n        ref={ref}\n      />\n\n      <button\n        type=\"submit\"\n        className={styles.basketItemButton}\n        onClick={increaseHandler}\n      >\n        <span>+</span>\n      </button>\n    </div>\n  );\n};\n","import { FaTimes } from 'react-icons/fa';\nimport { IProductItem } from '../../../interfaces';\nimport { useAppDispatch } from '../../../redux/hooks';\nimport { removeToCart } from '../../MainPageContent/Goods/Good/cartSlice';\nimport styles from './BasketItem.module.css';\nimport { BasketItemCounter } from './BasketItemCounter/BasketItemCounter';\n\ninterface Props {\n  product: IProductItem;\n}\n\nexport const BasketItem: React.FC<Props> = ({ product }) => {\n  const dispatch = useAppDispatch();\n\n  const remove = () => {\n    dispatch(removeToCart(product));\n  };\n\n  return (\n    <div className={styles.basketItem}>\n      <div className={styles.basketItemPictureWrapper}>\n        <img\n          className={styles.basketItemPicture}\n          src={product.img}\n          alt=\"New TyberryShop Product\"\n        />\n      </div>\n      <div className={styles.basketItemProductTitle}>{product.text}</div>\n      <div className={styles.basketItemProductCounter}>\n        <BasketItemCounter product={product} />\n      </div>\n      <div className={styles.basketItemProductPriceWrapper}>\n        <div className={styles.basketItemProductPriceNew}>\n          {product.price * product.count -\n            product.price * product.count * product.sale}{' '}\n          &#8381;\n        </div>\n        <div className={styles.basketItemProductPrice}>\n          {product.price * product.count} &#8381;\n        </div>\n      </div>\n      <div className={styles.basketItemProductDeleteWrapper}>\n        <FaTimes onClick={() => remove()} />\n      </div>\n    </div>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { IProductItem } from '../../interfaces';\nimport { useAppDispatch, useAppSelector } from '../../redux/hooks';\nimport {\n  removeAllCarts,\n  selectCartValue,\n} from '../MainPageContent/Goods/Good/cartSlice';\nimport { addToOrder } from '../Profile/PersonalProfilePage/personalProfileSlice';\nimport styles from './Basket.module.css';\nimport { BasketItem } from './BasketItem/BasketItem';\n\nconst Basket: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n  const cartProducts = useAppSelector(selectCartValue); // get value from state + subscribe for updates\n\n  const [totalCount, setTotalCount] = useState(0);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [totalPriceBeforeSale, setTotalPriceBeforeSale] = useState(0);\n  const [totalSale, setTotalSale] = useState(0);\n\n  useEffect(() => {\n    let items = 0;\n    let price = 0;\n    let priceBeforeSale = 0;\n    let sale = 0;\n\n    cartProducts.forEach((item) => {\n      items += item.count;\n      price += (item.price - item.price * item.sale) * item.count;\n      priceBeforeSale += item.price * item.count;\n      sale += item.sale * priceBeforeSale;\n    });\n\n    setTotalCount(items);\n    setTotalPrice(price);\n    setTotalPriceBeforeSale(priceBeforeSale);\n    setTotalSale(sale);\n  }, [\n    cartProducts,\n    totalPrice,\n    setTotalPrice,\n    totalCount,\n    setTotalCount,\n    totalPriceBeforeSale,\n    setTotalPriceBeforeSale,\n    totalSale,\n    setTotalSale,\n  ]);\n\n  const addOrder = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    history.push('/profile');\n    const order = {\n      totalPriseOrder: totalPrice,\n      totalCountOrder: totalCount,\n    };\n    dispatch(addToOrder(order));\n    dispatch(removeAllCarts());\n  };\n\n  if (cartProducts.length === 0) {\n    return (\n      <div className={styles.basketNothing}>\n        {' '}\n        В вашей корзине пока ничего нет.\n      </div>\n    );\n  }\n\n  return (\n    <form className={styles.basket}>\n      <h2 className={styles.basketTitle}>Заказ</h2>\n      <div className={styles.basketWrapper}>\n        <div>\n          {cartProducts.map((product: IProductItem) => (\n            <BasketItem key={product.id} product={product} />\n          ))}\n        </div>\n\n        <div className={styles.basketResultWrapper}>\n          <div className={styles.basketResultItem}>\n            <span>Итого</span>\n            <span>{totalPrice} &#8381;</span>\n          </div>\n          <div className={styles.basketResultItem}>\n            <span>Товары,{totalCount} шт.</span>\n            <span> {totalPriceBeforeSale} &#8381;</span>\n          </div>\n          <div className={styles.basketResultItem}>\n            <span>Скидка</span>\n            <span>{totalSale} &#8381; </span>\n          </div>\n          <div className={styles.basketResultItem}>\n            <span>Доставка</span>\n            <span>Бесплатно</span>\n          </div>\n\n          <div className={styles.basketResultButtonWrapper}>\n            <button\n              type=\"submit\"\n              onClick={addOrder}\n              className={styles.basketResultButton}\n            >\n              Заказать\n            </button>\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n};\n\nexport default Basket;\n"],"sourceRoot":""}